<?xml version="1.0" encoding="UTF-8"?>
<!--
  Created by IntelliJ IDEA.
  User: juan
  Date: 26/7/2023
  Time: 10:20
-->
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html">

    <h:head>
        <style type="text/css">
            body .ui-selectonemenu .ui-selectonemenu-trigger .ui-icon {
                position: static;
                margin: 0;
                color: white;
                font-family: "primeicons", serif !important;
                font-style: normal;
                font-weight: normal;
                display: inline-block;
                background: none;
            }
        </style>
    </h:head>

    <h:body>
        <f:view locale="es">
            <p:ajaxStatus onstart="PF('statusDialog').show()"
                          onsuccess="PF('statusDialog').hide()"/>
            <p:dialog widgetVar="statusDialog" modal="true" draggable="false"
                      closable="false" resizable="false" showHeader="false">
                <h:panelGrid columns="1" styleClass="text-center">
                    <div class="text-center">
                        <p:graphicImage library="images" name="loader_ajax.gif" cache="false"
                                        style="text-align: center;"
                                        height="32" width="32"/>
                    </div>
                    <div class="text-center">
                        <h:outputText value="Espere un momento.."/>
                    </div>
                </h:panelGrid>
            </p:dialog>
            <h:form id="frmEmisores">
                <p:messages id="messages" showDetail="true" skipDetailIfEqualsSummary="true" closable="true"/>
                <div class="box-root padding-top--24 flex-flex flex-direction--column">
                    <div class="formBg">
                        <div class="card shadow p-3 mb-5 bg-white rounded">
                            <p:outputPanel rendered="#{not empty mtto.selectedEmisor}">
                                <p:messages redisplay="true" id="msgDetail"
                                            skipDetailIfEqualsSummary="true" closable="true"/>
                                <p:graphicImage library="images" name="PROFILE.svg"
                                                rendered="true" width="200" height="150"
                                                styleClass="product-image"/>
                                <p:panelGrid columns="4" layout="flex"
                                             columnClasses="col-12 md:col-2 xl:col-2, col-12 md:col-4 xl:col-4,
                                             col-12 md:col-2 xl:col-2, col-12 md:col-4 xl:col-4"
                                             contentStyleClass="align-items-baseline ui-fluid">
                                    <p:outputLabel for="txtTipoDoc">TIPO DOCUMENTO</p:outputLabel>
                                    <p:selectOneMenu id="txtTipoDoc" value="#{mtto.selectedEmisor.rucTipoDocId}" required="true">
                                        <f:selectItems value="#{mtto.tiposDocumentosList}" var="td"
                                                       itemLabel="#{td.docNombreDocumento}" itemValue="#{td.docId}"/>
                                    </p:selectOneMenu>
                                    <p:outputLabel for="name">NIT</p:outputLabel>
                                    <p:inputText id="name" value="#{mtto.selectedEmisor.rucNitContribuyente}"
                                                 required="true" maxlength="45"
                                                 requiredMessage="NIT requerido"
                                                 validatorMessage="Formato de NIT NO válido"
                                                 readonly="#{mtto.selectedEmisor.rucId > 0 ? 'true':'false'}">
                                        <f:validateRegex pattern="(^\d{1,45}$)"/>
                                    </p:inputText>
                                    <p:outputLabel for="txtNrc">NRC</p:outputLabel>
                                    <p:inputText id="txtNrc" required="true" maxlength="45"
                                                 requiredMessage="NRC requerido"
                                                 validatorMessage="Formato NRC NO válido"
                                                 readonly="#{mtto.selectedEmisor.rucId > 0 ? 'true':'false'}"
                                                 value="#{mtto.selectedEmisor.rucNrc}">
                                        <f:validateRegex pattern="(^\d{1,10}$)"/>
                                    </p:inputText>
                                </p:panelGrid>
                                <p:panelGrid columns="4" layout="flex"
                                             columnClasses="col-12 md:col-2 xl:col-2, col-12 md:col-4 xl:col-4,
                                             col-12 md:col-2 xl:col-2, col-12 md:col-4 xl:col-4"
                                             contentStyleClass="align-items-baseline ui-fluid">
                                    <h:outputLabel value="NOMBRE COMERCIAL" for="txtNombreComercial"/>
                                    <p:inputTextarea id="txtNombreComercial" maxlength="120"
                                                     counter="displaySubCom" counterTemplate="{0}/120"
                                                     value="#{mtto.selectedEmisor.rucNombreComercial}">
                                        <h:outputText styleClass="block" id="displaySubCom"/>
                                    </p:inputTextarea>
                                    <h:outputLabel value="NOMBRE O RAZÓN SOCIAL" for="txtRazonSocial"/>
                                    <p:inputTextarea id="txtRazonSocial" maxlength="120"
                                                     counter="displaySubRaz" counterTemplate="{0}/120"
                                                     value="#{mtto.selectedEmisor.rucNombreRazonsocial}">
                                        <h:outputText styleClass="block" id="displaySubRaz"/>
                                    </p:inputTextarea>
                                </p:panelGrid>
                                <p:panelGrid columns="2" layout="flex"
                                             columnClasses="col-12 md:col-2 xl:col-2, col-12 md:col-10 xl:col-10"
                                             contentStyleClass="align-items-baseline ui-fluid">
                                    <h:outputLabel value="ACTIVIDAD" for="selActividad"/>
                                    <p:selectOneMenu id="selActividad" value="#{mtto.selectedEmisor.rucCodactividad}"
                                                     filter="true" filterMatchMode="contains">
                                        <f:selectItem itemLabel="[SELECCIONAR]" itemValue=""/>
                                        <f:selectItems value="#{mtto.actividadEconomicaList}" var="act"
                                                       itemLabel="#{act.ccaeCodigo} - #{act.ccaeValor}"
                                                       itemValue="#{act.ccaeCodigo}"/>
                                        <p:ajax update="@this" listener="#{mtto.getActividadDescEmisor(act)}"/>
                                    </p:selectOneMenu>
                                </p:panelGrid>
                                <p:panelGrid columns="4" layout="flex"
                                             columnClasses="col-12 md:col-2 xl:col-2, col-12 md:col-4 xl:col-4,
                                             col-12 md:col-2 xl:col-2, col-12 md:col-4 xl:col-4"
                                             contentStyleClass="align-items-baseline ui-fluid">
                                    <p:outputLabel for="correo">CORREO</p:outputLabel>
                                    <p:inputText id="correo" value="#{mtto.selectedEmisor.rucEmailContribuyente}"
                                                 onkeyup="this.value = this.value.toLowerCase()"
                                                 validatorMessage="Formato de correo no válido"
                                                 required="true" requiredMessage="Correo Requerido">
                                        <f:validateRegex
                                            pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$"/>
                                    </p:inputText>
                                    <p:outputLabel for="telefono">TELEFONO</p:outputLabel>
                                    <p:inputText id="telefono" requiredMessage="Teléfono requerido"
                                                 required="true" validatorMessage="Formato TELEFONO NO válido"
                                                 value="#{mtto.selectedEmisor.rucTelefonoTrabajo}">
                                        <f:validateRegex
                                            pattern="^\s*(?:\+?(\d{1,3}))?([-. (]*(\d{3})[-. )]*)?((\d{3})[-. ]*(\d{2,4})(?:[-.x ]*(\d+))?)\s*$"/>
                                    </p:inputText>
                                </p:panelGrid>

                                <p:panelGrid columns="4" layout="flex"
                                             columnClasses="col-12 md:col-2 xl:col-2, col-12 md:col-4 xl:col-4,
                                             col-12 md:col-2 xl:col-2, col-12 md:col-4 xl:col-4"
                                             contentStyleClass="align-items-baseline ui-fluid">
                                    <h:outputLabel value="DEPARTAMENTO"/>
                                    <p:selectOneMenu required="true" id="selDepto"
                                                     value="#{mtto.selectedEmisor.rucCodigoDepartamento}">
                                        <f:selectItem itemLabel="SELECCIONAR" itemValue="0"/>
                                        <f:selectItems value="#{mtto.departamentos}" var="dep"
                                                       itemValue="#{dep.ubgCodigo}"
                                                       itemLabel="#{dep.ubgDescripcion.toUpperCase()}"/>
                                        <p:ajax event="itemSelect" update="selMuni"
                                                listener="#{mtto.findMunicipiosByDeptoCod(mtto.selectedEmisor.rucCodigoDepartamento)}"/>
                                    </p:selectOneMenu>
                                    <h:outputLabel value="MUNICIPIO"/>
                                    <p:selectOneMenu id="selMuni" required="true"
                                                     value="#{mtto.selectedEmisor.rucCodigoMunicipio}">
                                        <f:selectItems value="#{mtto.municipios}" var="mun"
                                                       itemValue="#{mun.ubgCodigo}" itemLabel="#{mun.ubgDescripcion}"/>
                                    </p:selectOneMenu>
                                </p:panelGrid>

                                <p:panelGrid columns="2" layout="flex"
                                             columnClasses="col-12 md:col-2 xl:col-2, col-12 md:col-10 xl:col-10"
                                             contentStyleClass="align-items-baseline ui-fluid">
                                    <h:outputLabel value="DOMICILIO" for="txtDomicilio"/>
                                    <p:inputTextarea id="txtDomicilio" maxlength="200"
                                                     counterTemplate="{0}/200" rows="3"
                                                     counter="displaySub" required="true"
                                                     requiredMessage="DOMICILIO requerido"
                                                     value="#{mtto.selectedEmisor.rucDomicilio}">
                                        <h:outputText styleClass="block" id="displaySub"/>
                                    </p:inputTextarea>
                                </p:panelGrid>
                            </p:outputPanel>
                        </div>
                    </div>
                </div>
            </h:form>
        </f:view>
    </h:body>

</html>